/*-khi xóa chi tiết hóa đơn bán thì xóa luôn chi tiết hóa đơn 
-khi xóa chi tiết nhập thì xóa luôn chi tiết nhập 
-khi thêm ,sửa chi tiết hóa đơn bán thì sửa lại tổng tiền
-khi thêm ,sửa chi tiết nhập thì sửa lại tổng tiền */
--
create trigger xoahoadon on chitiethdb for delete
as 
begin
	delete from HOADON where mahd in (select mahd from deleted)
	delete from CHITIEThdb where mahd in (select mahd from deleted)
end

--
create trigger xoahoadonnhap on chitietnhap for delete
as 
begin
	delete from phieunhap where mapn in (select mapn from deleted)
	delete from chitietnhap where mapn in (select mapn from deleted)
end
--
alter trigger suahoadon on chitiethdb for insert, update
as
begin 
	declare @mahd nvarchar(20), @madt nvarchar(20), @soluong int, @gia money, @khuyenmai float,@thue float
	select @mahd=mahd, @madt=madt,@soluong=slb from inserted 
	select @gia=gia from inserted, dienthoai where inserted.madt=dienthoai.MADT	
	select @khuyenmai=khuyenmai,@thue=thuesuat from hoadon where @mahd=hoadon.MAHD
	update hoadon set tongtien=(@gia*@soluong+ @gia*@soluong*@thue - @gia*@soluong*KHUYENMAI ) where @mahd=hoadon.mahd 
end

select *from hoadon join CHITIETHDB on HOADON.MAHD=CHITIETHDB.MAHD

select * from dienthoai where madt='dt013'
CREATE DATABASE QLDT

USE DATABASE QLDT

CREATE TABLE NHANVIEN (
	MANV NVARCHAR(20) PRIMARY KEY NOT NULL,
	SDTNV NVARCHAR(20) NULL,
	DIACHINV NVARCHAR(50) NULL,
	HOTENNV NVARCHAR(20) NULL,
	GIOITINH NVARCHAR(10) NULL,
	LUONG MONEY NULL
)

CREATE TABLE PHIEUNHAP(
	MAPN NVARCHAR(20) PRIMARY KEY NOT NULL,
	NGAYNHAP DATETIME NULL,
	TONGGIA MONEY NULL,
	MANPP NVARCHAR(20) FOREIGN KEY REFERENCES NHAPHANPHOI(MANPP) NULL,
	MANV NVARCHAR(20) FOREIGN KEY REFERENCES NHANVIEN(MANV) NULL 
	 
)

CREATE TABLE KHACHHANG(
	MAKH NVARCHAR(20) PRIMARY KEY NOT NULL,
	HOTENKH NVARCHAR(20) NULL,
	DIACHIKH NVARCHAR(50) NULL,
	SDTKH NVARCHAR(20) NULL
)

CREATE TABLE HOADON(
	MAHD NVARCHAR(20) PRIMARY KEY NOT NULL,
	NGAYLAP DATETIME NULL,
	TONGTIEN MONEY NULL,
	THUESUAT FLOAT NULL,
	KHUYENMAI FLOAT, 
	MANV NVARCHAR(20) FOREIGN KEY REFERENCES NHANVIEN(MANV) NULL ,
	MAKH NVARCHAR(20) FOREIGN KEY REFERENCES KHACHHANG(MAKH) NULL
		 
)

CREATE TABLE DIENTHOAI(
	MADT NVARCHAR(20) PRIMARY KEY NOT NULL,	
	TENDT NVARCHAR(50) NULL,	
	SOIMEI NVARCHAR(100) NULL,
	MAU NVARCHAR(50) NULL,
	MANHINH NVARCHAR(100) NULL,
	HDH_CPU NVARCHAR(200) NULL,
	CAMERA NVARCHAR(200) NULL,	
	BONHO_LUUTRU NVARCHAR(100) NULL,		
	GIA MONEY NULL,
	THOIGIANBAOHANH NVARCHAR(20) NULL,
	GHICHU NVARCHAR(300) NULL,
	ANH NVARCHAR(50) NULL
)

CREATE TABLE CHITIETNHAP(
	MAPN NVARCHAR(20) FOREIGN KEY REFERENCES PHIEUNHAP(MAPN) NULL,
	MADT NVARCHAR(20) FOREIGN KEY REFERENCES DIENTHOAI(MADT)  NULL,
	SLN INT NULL
		 
)

CREATE TABLE CHITIETHDB(
	MAHD NVARCHAR(20) FOREIGN KEY REFERENCES HOADON(MAHD)  NULL,
	MADT NVARCHAR(20) FOREIGN KEY REFERENCES DIENTHOAI(MADT)  NULL,
	SLB INT  NULL
)


CREATE TABLE NHAPHANPHOI(
	MANPP NVARCHAR(20) PRIMARY KEY NOT NULL,
	TENNPP NVARCHAR(50)  NULL,
	DIACHINPP NVARCHAR(50) NULL,
	EMAILNPP NVARCHAR(50) NULL,
	SDTNPP INT NULL

)


GO

INSERT NHANVIEN(MANV,DIACHINV,GIOITINH,HOTENNV,SDTNV) VALUES ('NV001',N'HÀ NỘI','NAM',N'ĐẶNG QUỐC ANH','0978791229');
INSERT NHANVIEN(MANV,DIACHINV,GIOITINH,HOTENNV,SDTNV) VALUES ('NV002',N'HÀ NỘI','NAM',N'NGUYỄN HÔNG ĐỨC','0943437473');
INSERT NHANVIEN(MANV,DIACHINV,GIOITINH,HOTENNV,SDTNV) VALUES ('NV003',N'HÀ NỘI','NAM',N'NGUYỄN VĂN ĐỨC','0921113456');
INSERT NHANVIEN(MANV,DIACHINV,GIOITINH,HOTENNV,SDTNV) VALUES ('NV004',N'HÀ NỘI','NAM',N'ĐÀO VĂN ĐỨC','0967898989');

GO

INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH001',N'NGUYỄN THỊ HUỆ',N'36 TRẦN THÁI TÔNG','0355552121');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH002',N'NGUYỄN VĂN ĐỊNH',N'55 ĐÊ LA THÀNH','0378666666');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH003',N'TRẦN THÁI TÔNG',N'100 TRẦN THÁI TÔNG','0973807319');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH004',N'ĐẶNG TRẦN NHÂN',N'445 CẦU GIẤY','0380123456');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH005',N'LÊ THỊ NA',N'30 CẦU GIẤY','0345111111');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH006',N'NGUYỄN VĂN ĐỨC',N'115 CẦU GIẤY','0345111113');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH007',N'LÊ THỊ DUNG',N'330 NGUYỄN TRÃI','0345111144');
INSERT KHACHHANG(MAKH,HOTENKH,DIACHIKH,SDTKH) VALUES ('KH008',N'NGÔ GIANG MẠNH ĐỨC',N'30 LẠC LONG QUÂN','0345111155');

GO

INSERT NHAPHANPHOI(MANPP,TENNPP,DIACHINPP,EMAILNPP,SDTNPP) VALUES ('NPP001',N'THẾ GIỚI DI ĐỘNG ',N'50 CẦU GIẤY','THEGIOIDIDONG@GMAIL.COM','0978555555');
INSERT NHAPHANPHOI(MANPP,TENNPP,DIACHINPP,EMAILNPP,SDTNPP) VALUES ('NPP002',N'HÀ NỘI COMPUTER',N'45 TRẦN HƯNG ĐẠO','HANOICOMPUTER@GMAIL.COM','0344666666');
INSERT NHAPHANPHOI(MANPP,TENNPP,DIACHINPP,EMAILNPP,SDTNPP) VALUES ('NPP003',N'FPT',N'50 NGUYỄN KHANG','FPT@GMAIL.COM','0365488888');
INSERT NHAPHANPHOI(MANPP,TENNPP,DIACHINPP,EMAILNPP,SDTNPP) VALUES ('NPP004',N'LAPTOPHN',N'445 NGUYỄN KHANG','LAPTOPHN@GMAIL.COM','0365488431');
GO 


INSERT DIENTHOAI VALUES(
	N'DT001', 
	N'SAMSUNG A30',
	'123456789018354', 
	N'Đỏ',
	N'IPS LCD | FULL HD+(1080*2340 PIXELS) | 6.53"', 
	N'ANDROID 10 | CPU : Snapdragon 662 8 nhân', 
	N'Sau: Chinh 48 MP & Phụ 8MP, 2MP, 2MP | Trước: 8MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD', 
	'4600000',
	N'1 Năm',
	N'Pin: Li-ion | 6000mAh | Có sạc nhanh | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay', 
	N'DT001.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT002', 
	N'SAMSUNG A30',
	'123456789018320', 
	N'Đen',
	N'IPS LCD | FULL HD+(1080*2340 PIXELS) | 6.53"', 
	N'ANDROID 10 | CPU : Snapdragon 662 8 nhân', 
	N'Sau: Chinh 48 MP & Phụ 8MP, 2MP, 2MP | Trước: 8MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD', 
	'4600000',
	N'1 Năm',
	N'Pin: Li-ion | 6000mAh | Có sạc nhanh | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay', 
	N'DT002.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT003', 
	N'SAMSUNG A30',
	'123456789018377', 
	N'Xanh dương',
	N'IPS LCD | FULL HD+(1080*2340 PIXELS) | 6.53"', 
	N'ANDROID 10 | CPU : Snapdragon 662 8 nhân', 
	N'Sau: Chinh 48 MP & Phụ 8MP, 2MP, 2MP | Trước: 8MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD', 
	'4600000',
	N'1 Năm',
	N'Pin: Li-ion | 6000mAh | Có sạc nhanh | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay', 
	N'DT003.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT004', 
	N'IPHONE 12 PRO MAX',
	'123456735248914', 
	N'Bạc',
	N'OLED | FULL HD+(1284 x 2778 Pixels) | 6.7"', 
	N'iOS 14 | CPU : Apple A14 Bionic 6 nhân', 
	N'Sau: 3 camera 12 MP | Trước: 12MP', 
	N'RAM: 6GB | ROM: 128GB - 256GB - 512GB', 
	'32000000',
	N'1 Năm', 
	N'Pin: Li-ion | 3687mAh | Có sạc nhanh, tối đa 20W | Mở khóa bằng khuôn mặt FaceID, Xem phim H.264(MPEG4-AVC)', 
	N'DT004'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT005', 
	N'IPHONE 12 PRO MAX',
	'123456735248254', 
	N'Đen',
	N'OLED | FULL HD+(1284 x 2778 Pixels) | 6.7"', 
	N'iOS 14 | CPU : Apple A14 Bionic 6 nhân', 
	N'Sau: 3 camera 12 MP | Trước: 12MP', 
	N'RAM: 6GB | ROM: 128GB - 256GB - 512GB', 
	'32000000',
	N'1 Năm', 
	N'Pin: Li-ion | 3687mAh | Có sạc nhanh, tối đa 20W | Mở khóa bằng khuôn mặt FaceID, Xem phim H.264(MPEG4-AVC)', 
	N'DT005'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT006', 
	N'IPHONE 12 PRO MAX',
	'123450032448254', 
	N'Xanh dương',
	N'OLED | FULL HD+(1284 x 2778 Pixels) | 6.7"', 
	N'iOS 14 | CPU : Apple A14 Bionic 6 nhân', 
	N'Sau: 3 camera 12 MP | Trước: 12MP', 
	N'RAM: 6GB | ROM: 128GB - 256GB - 512GB', 
	'33000000',
	N'1 Năm', 
	N'Pin: Li-ion | 3687mAh | Có sạc nhanh, tối đa 20W | Mở khóa bằng khuôn mặt FaceID, Xem phim H.264(MPEG4-AVC)', 
	N'DT006.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT007', 
	N'IPHONE 12 MINI',
	'123456789423626', 
	N'Bạc',
	N'OLED | FULL HD+(1170 x 2532 Pixels) | 6.1"', 	
	N'iOS 14 | CPU : Apple A14 Bionic 6 nhân', 
	N'Sau: 2 camera 12 MP | Trước: 12MP', 
	N'RAM: 4GB | ROM: 64GB - 128GB - 256GB', 
	'22000000',
	N'1 Năm', 
	N'Pin: Pin: Li-ion | 2815mAh | Có sạc nhanh, tối đa 20W | Mở khóa bằng khuôn mặt FaceID, Xem phim H.264(MPEG4-AVC)', 
	N'DT007.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT008', 
	N'IPHONE 12 MINI',
	'123456789298567', 
	N'Đen',
	N'OLED | FULL HD+(1170 x 2532 Pixels) | 6.1"', 	
	N'iOS 14 | CPU : Apple A14 Bionic 6 nhân', 
	N'Sau: 2 camera 12 MP | Trước: 12MP', 
	N'RAM: 4GB | ROM: 64GB - 128GB - 256GB', 
	'22000000',
	N'1 Năm', 
	N'Pin: Pin: Li-ion | 2815mAh | Có sạc nhanh, tối đa 20W | Mở khóa bằng khuôn mặt FaceID, Xem phim H.264(MPEG4-AVC)', 
	N'DT008.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT009', 
	N'IPHONE 12 MINI',
	'123456789275218', 
	N'Xanh dương',
	N'OLED | FULL HD+(1170 x 2532 Pixels) | 6.1"', 	
	N'iOS 14 | CPU : Apple A14 Bionic 6 nhân', 
	N'Sau: 2 camera 12 MP | Trước: 12MP', 
	N'RAM: 4GB | ROM: 64GB - 128GB - 256GB', 
	'24000000',
	N'1 Năm', 
	N'Pin: Pin: Li-ion | 2815mAh | Có sạc nhanh, tối đa 20W | Mở khóa bằng khuôn mặt FaceID, Xem phim H.264(MPEG4-AVC)', 
	N'DT009.jpg'
);
GO
----------------
INSERT DIENTHOAI VALUES(
	N'DT010', 
	N'XIAOMI MI 11 LITE',
	'123456764672539', 
	N'Bạc',
	N'AMOLED | FULL HD+(1080*2400 PIXELS) | 6.43"', 	
	N'ANDROID 11 | CPU : Snapdragon 720G 8 nhân', 
	N'Sau: Chính 64 MP & Phụ 8MP, 2MP, 2MP | Trước: 44MP', 
	N'RAM: 8GB | ROM: 128GB | Thẻ nhớ: MicroSD', 
	'8400000',
	N'1 Năm', 
	N'Pin: Li-ion | 4310mAh | Có sạc nhanh tối đa 65W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay', 
	N'DT010.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT011', 
	N'XIAOMI MI 11 LITE',
	'123456762275460', 
	N'Đen',
	N'AMOLED | FULL HD+(1080*2400 PIXELS) | 6.43"', 	
	N'ANDROID 11 | CPU : Snapdragon 720G 8 nhân', 
	N'Sau: Chính 64 MP & Phụ 8MP, 2MP, 2MP | Trước: 44MP', 
	N'RAM: 8GB | ROM: 128GB | Thẻ nhớ: MicroSD', 
	'8400000',
	N'1 Năm', 
	N'Pin: Li-ion | 4310mAh | Có sạc nhanh tối đa 65W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay', 
	N'DT011.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT012', 
	N'SAMSUNG GALAXY A52 5G',
	'123454513165111', 
	N'Đen',
	N'Super AMOLED | FULL HD+(1080*2400 PIXELS) | 6.5"', 	
	N'ANDROID 11 | CPU : Snapdragon 750G 5G 8 nhân', 
	N'Sau: Chính 64 MP & Phụ 8MP, 2MP, 2MP | Trước: 32MP', 
	N'RAM: 8GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 1TB', 
	'10600000',
	N'1 Năm', 
	N'Pin: Li-ion | 4500mAh | Có sạc nhanh tối đa 25W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay dưới màn hình', 
	N'DT012.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT013', 
	N'SAMSUNG GALAXY A52 5G',
	'123454512243164', 
	N'Xanh dương',
	N'Super AMOLED | FULL HD+(1080*2400 PIXELS) | 6.5"', 	
	N'ANDROID 11 | CPU : Snapdragon 750G 5G 8 nhân', 
	N'Sau: Chính 64 MP & Phụ 8MP, 2MP, 2MP | Trước: 32MP', 
	N'RAM: 8GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 1TB', 
	'10600000',
	N'1 Năm', 
	N'Pin: Li-ion | 4500mAh | Có sạc nhanh tối đa 25W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay dưới màn hình', 
	N'DT013.jpg'
);
GO
---------------
INSERT DIENTHOAI VALUES(
	N'DT014', 
	N'SAMSUNG GALAXY A32',
	'12345457563133', 
	N'Vàng đồng',
	N'AMOLED | FULL HD+(1080*2400 PIXELS) | 6.67"', 	
	N'ANDROID 11 | CPU : Snapdragon 732G 5G 8 nhân', 
	N'Sau: Chính 108 MP & Phụ 8MP, 5MP, 2MP | Trước: 16MP', 
	N'RAM: 8GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 512GB', 
	'7490000',
	N'1 Năm', 
	N'Pin: Li-ion | 5020mAh | Có sạc nhanh | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay cạnh viền', 
	N'DT014.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT015', 
	N'XIAOMI REDMI NOTE 10',
	'123454511232344', 
	N'Vàng đồng',
	N'AMOLED | FULL HD+(1080*2400 PIXELS) | 6.43"', 	
	N'ANDROID 11 | CPU : Snapdragon 678 5G 8 nhân', 
	N'Sau: Chính 48 MP & Phụ 8MP, 2MP, 2MP | Trước: 13MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 512GB', 
	'5500000',
	N'1 Năm', 
	N'Pin: Li-ion | 5000mAh | Có sạc nhanh tối đa 33W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay cạnh viền', 
	N'DT015.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT016', 
	N'XIAOMI REDMI NOTE 10',
	'1234545112335201', 
	N'Xám',
	N'AMOLED | FULL HD+(1080*2400 PIXELS) | 6.43"', 	
	N'ANDROID 11 | CPU : Snapdragon 678 5G 8 nhân', 
	N'Sau: Chính 48 MP & Phụ 8MP, 2MP, 2MP | Trước: 13MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 512GB', 
	'5500000',
	N'1 Năm', 
	N'Pin: Li-ion | 5000mAh | Có sạc nhanh tối đa 33W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay cạnh viền', 
	N'DT016.jpg'
);
GO
------------
INSERT DIENTHOAI VALUES(
	N'DT017', 
	N'XIAOMI POCO X3 NFC',
	'123454511242336', 
	N'Xanh dương',
	N'IPS LCD | FULL HD+(1080*2400 PIXELS) | 6.67"', 	
	N'ANDROID 10 | CPU : Snapdragon 730G 8 nhân', 
	N'Sau: Chính 64 MP & Phụ 13MP, 2MP, 2MP | Trước: 20MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 256GB', 
	'6290000',
	N'1 Năm', 
	N'Pin: Li-ion | 5160mAh | Có sạc nhanh tối đa 33W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay cạnh viền', 
	N'DT017.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT018', 
	N'XIAOMI POCO X3 NFC',
	'123454511235337', 
	N'Xám',
	N'IPS LCD | FULL HD+(1080*2400 PIXELS) | 6.67"', 	
	N'ANDROID 10 | CPU : Snapdragon 730G 8 nhân', 
	N'Sau: Chính 64 MP & Phụ 13MP, 2MP, 2MP | Trước: 20MP', 
	N'RAM: 6GB | ROM: 128GB | Thẻ nhớ: MicroSD tối đa 256GB', 
	'6500000',
	N'1 Năm', 
	N'Pin: Li-ion | 5160mAh | Có sạc nhanh tối đa 33W | Mở khóa bằng khuôn mặt, Mở khóa bằng vân tay cạnh viền', 
	N'DT018.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT019', 
	N'XIAOMI REDMI 9C',
	'546454644677458', 
	N'Xanh dương',
	N'IPS LCD | HD+(720 * 1600 PIXELS) | 6.53"', 	
	N'ANDROID 10 | CPU : MediaTek Helio G35 8 nhân', 
	N'Sau: Chính 13 MP & Phụ 2MP, 2MP | Trước: 5MP', 
	N'RAM: 3GB | ROM: 32GB - 64GB | Thẻ nhớ: MicroSD tối đa 512GB', 
	'2490000',
	N'1 Năm', 
	N'Pin: Li-ion | 5000mAh | Có sạc nhanh tối đa 10W | Mở khóa bằng vân tay cạnh viền', 
	N'DT019.jpg'
);
GO
-------------
INSERT DIENTHOAI VALUES(
	N'DT020', 
	N'XIAOMI REDMI 9C',
	'546454644649959', 
	N'Xám',
	N'IPS LCD | HD+(720 * 1600 PIXELS) | 6.53"', 	
	N'ANDROID 10 | CPU : MediaTek Helio G35 8 nhân', 
	N'Sau: Chính 13 MP & Phụ 2MP, 2MP | Trước: 5MP', 
	N'RAM: 3GB | ROM: 32GB - 64GB | Thẻ nhớ: MicroSD tối đa 512GB', 
	'2490000',
	N'1 Năm', 
	N'Pin: Li-ion | 5000mAh | Có sạc nhanh tối đa 10W | Mở khóa bằng vân tay cạnh viền', 
	N'DT020.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT021', 
	N'XIAOMI MI 10T PRO 5G',
	'5401010443111451', 
	N'Xanh dương',
	N'IPS LCD | FULL HD+(1080 * 2440 PIXELS) | 6.67"', 	
	N'ANDROID 10 | CPU : Snapdragon 865 8 nhân', 
	N'Sau: Chính 108MP & Phụ 13MP, 5MP | Trước: 20MP', 
	N'RAM: 8GB | ROM: 128GB - 256GB', 
	'12790000',
	N'1 Năm', 
	N'Pin: Li-ion | 5000mAh | Có sạc nhanh tối đa 33W | Mở khóa bằng khuôn mặt ,Mở khóa bằng vân tay cạnh viền', 
	N'DT021.jpg'
);
GO

INSERT DIENTHOAI VALUES(
	N'DT022', 
	N'XIAOMI MI 10T PRO 5G',
	'5401010443142452', 
	N'Đen',
	N'IPS LCD | FULL HD+(1080 * 2440 PIXELS) | 6.67"', 	
	N'ANDROID 10 | CPU : Snapdragon 865 8 nhân', 
	N'Sau: Chính 108MP & Phụ 13MP, 5MP | Trước: 20MP', 
	N'RAM: 8GB | ROM: 128GB - 256GB', 
	'12590000',
	N'1 Năm', 
	N'Pin: Li-ion | 5000mAh | Có sạc nhanh tối đa 33W | Mở khóa bằng khuôn mặt ,Mở khóa bằng vân tay cạnh viền', 
	N'DT022.jpg'
);
GO
------------------------
INSERT DIENTHOAI VALUES(
	N'DT023', 
	N'XIAOMI REDMI 9T',
	'5442525342745388', 
	N'Xanh dương',
	N'IPS LCD | FULL HD+(1080 * 2340 PIXELS) | 6.3"', 	
	N'ANDROID 9 (Pie) | CPU : Snapdragon 665 8 nhân', 
	N'Sau: Chính 108MP & Phụ 13MP, 5MP | Trước: 20MP', 
	N'RAM: 4GB | ROM: 64GB', 
	'3790000',
	N'1 Năm', 
	N'Pin: Li-ion | 4000mAh | Có sạc nhanh tối đa 25W | Mở khóa bằng khuôn mặt ,Mở khóa bằng vân tay cạnh viền', 
	N'DT023.jpg'
);
GO







INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD001','KH005','NV001','4/10/2021','0.01','0.02','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD002','KH003','NV001','4/10/2021','0.01','0.02','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD003','KH001','NV002','4/12/2021','0.01','0.02','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD004','KH003','NV003','4/11/2021','0.01','0.02','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD005','KH004','NV001','4/13/2021','0.01','0.02','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD006','KH005','NV004','4/14/2021','0.01','0.01','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD007','KH002','NV001','4/18/2021','0.01','0.01','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD008','KH004','NV001','4/19/2021','0.01','0.03','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD009','KH005','NV003','4/20/2021','0.01','0.01','');
INSERT HOADON(MAHD,MAKH,MANV,NGAYLAP,THUESUAT,KHUYENMAI,TONGTIEN) VALUES ('HD010','KH005','NV003','4/20/2021','0.01','0.01','');

go

INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT015','HD001','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT013','HD002','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT013','HD003','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT015','HD004','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT011','HD005','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT011','HD006','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT005','HD007','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT015','HD008','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT015','HD009','1');
INSERT CHITIETHDB(MADT,MAHD,SLB) VALUES ('DT013','HD010','1');



GO



INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN001','NV001','3/3/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN002','NV001','3/4/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN003','NV001','4/4/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN004','NV001','4/5/2021','' ,'NPP001');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN005','NV001','4/1/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN006','NV003','4/6/2021','' ,'NPP001');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN007','NV003','4/6/2021','' ,'NPP001');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN008','NV001','4/6/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN009','NV001','4/6/2021','' ,'NPP001');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN010','NV002','4/6/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN011','NV001','4/6/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN012','NV001','4/7/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN013','NV003','4/7/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN014','NV001','4/7/2021','','NPP001' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN015','NV004','4/6/2021','' ,'NPP001');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN016','NV004','4/7/2021','' ,'NPP001');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN017','NV004','4/7/2021','','NPP003' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN018','NV004','4/7/2021','','NPP003' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN019','NV004','4/7/2021','','NPP003' );
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN020','NV004','4/7/2021','' ,'NPP003');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN021','NV004','4/7/2021','' ,'NPP003');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN022','NV004','4/8/2021','' ,'NPP003');
INSERT PHIEUNHAP(MAPN,MANV,NGAYNHAP,TONGGIA,MANPP) VALUES('PN023','NV002','4/7/2021','' ,'NPP003');


GO


INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN001','DT001','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN002','DT002','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN003','DT003','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN004','DT004','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN005','DT005','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN006','DT006','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN007','DT007','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN008','DT008','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN009','DT009','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN010','DT010','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN011','DT011','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN012','DT012','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN013','DT013','10');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN014','DT014','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN015','DT015','30');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN016','DT016','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN017','DT017','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN018','DT018','20');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN019','DT019','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN020','DT020','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN021','DT021','20');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN022','DT022','2');
INSERT CHITIETNHAP(MAPN,MADT,SLN) VALUES ('PN023','DT023','23');




/*update trị giá của mỗi hóa đơn*/

-- tạo bảng trị giá
select * from HOADON

SELECT HOADON.MAHD, TONGTIEN=(GIA*SLB+GIA*SLB*THUESUAT-GIA*SLB*KHUYENMAI)
INTO TRIGIA
FROM HOADON JOIN (DIENTHOAI JOIN CHITIETHDB ON DIENTHOAI.MADT=CHITIETHDB.MADT) ON HOADON.MAHD=CHITIETHDB.MAHD
WHERE DIENTHOAI.MADT=CHITIETHDB.MADT

-- update trị giá

UPDATE HOADON
SET HOADON.TONGTIEN= TRIGIA.TONGTIEN
FROM HOADON INNER JOIN TRIGIA ON HOADON.MAHD= TRIGIA.MAHD

/*update tổng giá trong phiếu nhập*/

-- tạo bảng tổng giá
select * from PHIEUNHAP

SELECT PHIEUNHAP.MAPN, TONGGIA=(DIENTHOAI.GIA*CHITIETNHAP.SLN)
INTO TONGGIA
FROM PHIEUNHAP JOIN (DIENTHOAI JOIN CHITIETNHAP ON DIENTHOAI.MADT=CHITIETNHAP.MADT) ON PHIEUNHAP.MAPN= CHITIETNHAP.MAPN
WHERE DIENTHOAI.MADT= CHITIETNHAP.MADT

-- update tổng giá

UPDATE PHIEUNHAP
SET PHIEUNHAP.TONGGIA=TONGGIA.TONGGIA
FROM PHIEUNHAP INNER JOIN TONGGIA ON PHIEUNHAP.MAPN=TONGGIA.MAPN



























